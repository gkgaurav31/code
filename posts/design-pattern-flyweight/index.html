<!DOCTYPE html><html lang="en-US" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" /><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Design Pattern: Flyweight" /><meta name="author" content="Gaurav Kumar" /><meta property="og:locale" content="en_US" /><meta name="description" content="FLYWEIGHT" /><meta property="og:description" content="FLYWEIGHT" /><link rel="canonical" href="https://gkgaurav31.github.io/posts/design-pattern-flyweight/" /><meta property="og:url" content="https://gkgaurav31.github.io/posts/design-pattern-flyweight/" /><meta property="og:site_name" content="Gaurav’s GitHub Page" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-07-16T18:39:00+05:30" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Design Pattern: Flyweight" /><meta name="twitter:site" content="@gkgaurav31" /><meta name="twitter:creator" content="@Gaurav Kumar" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Gaurav Kumar"},"dateModified":"2023-07-16T23:23:50+05:30","datePublished":"2023-07-16T18:39:00+05:30","description":"FLYWEIGHT","headline":"Design Pattern: Flyweight","mainEntityOfPage":{"@type":"WebPage","@id":"https://gkgaurav31.github.io/posts/design-pattern-flyweight/"},"url":"https://gkgaurav31.github.io/posts/design-pattern-flyweight/"}</script><title>Design Pattern: Flyweight | Gaurav's GitHub Page</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous" /><link rel="dns-prefetch" href="https://fonts.gstatic.com" /><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials" /><link rel="dns-prefetch" href="https://www.google-analytics.com" /><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous" /><link rel="dns-prefetch" href="https://www.googletagmanager.com" /><link rel="preconnect" href="https://cdn.jsdelivr.net" /><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous" /><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js" ></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-BM99475K5Q"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-BM99475K5Q'); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/freak.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Gaurav's GitHub Page</a></div><div class="site-subtitle font-italic">A place to code</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT ME</span> </a><li class="nav-item"> <a href="/coffee/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>BUY ME A COFFEE</span> </a><li class="nav-item"> <a href="/gratitude/" class="nav-link"> <i class="fa-fw fas fa-heart ml-xl-3 mr-xl-3 unloaded"></i> <span>THANK YOU!</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/gkgaurav31" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/gkgaurav31" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['gkgaurav31','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>Design Pattern: Flyweight</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Design Pattern: Flyweight</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Gaurav Kumar </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sun, Jul 16, 2023, 6:39 PM +0530" prep="on" > Jul 16, 2023 <i class="unloaded">2023-07-16T18:39:00+05:30</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Jul 16, 2023, 11:23 PM +0530" prefix="Updated " > Jul 16, 2023 <i class="unloaded">2023-07-16T23:23:50+05:30</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="901 words">5 min</span></div></div><div class="post-content"><h2 id="flyweight">FLYWEIGHT</h2><p>The Flyweight pattern is a design pattern that helps optimize memory usage by sharing common data between multiple objects. It is particularly useful when dealing with objects that have both <strong>intrinsic (shared)</strong> and <strong>extrinsic (unique)</strong> attributes.</p><p>In this example, let’s consider the Ball class with the attributes color, imageURL, coordinateX, coordinateY, and radius. The color and imageURL can be considered intrinsic attributes because they are the same for all balls of the same type in the game. On the other hand, the coordinateX, coordinateY, and radius are extrinsic attributes because they vary for each individual ball object.</p><p><a href="https://www.youtube.com/watch?v=8cL9KbHS5kE">Good Explanation by Yogita Sharma - YouTube</a></p><h2 id="overview-uml">OVERVIEW (UML)</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/design_patterns/flyweight.png" alt="snapshot" /> <em>Created using <a href="https://plantuml.com/">PlantUML</a>.</em></p><h2 id="code-walkthrough">CODE WALKTHROUGH</h2><h3 id="storing-the-intrinsic-attributes-using-flyweight">STORING THE INTRINSIC ATTRIBUTES USING FLYWEIGHT</h3><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">com.designpattern</span><span class="o">;</span>

<span class="c1">//Flyweight ball class representing shared intrinsic attributes</span>
<span class="c1">//These attributes will not change for given "ballColor" and "ballImageURL" (so, no setter methods)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">FlyweightBall</span> <span class="o">{</span>

 <span class="kd">private</span> <span class="nc">String</span> <span class="n">ballColor</span><span class="o">;</span>
 <span class="kd">private</span> <span class="nc">String</span> <span class="n">ballImageURL</span><span class="o">;</span>
 
 <span class="kd">public</span> <span class="nf">FlyweightBall</span><span class="o">(</span><span class="nc">String</span> <span class="n">ballColor</span><span class="o">,</span> <span class="nc">String</span> <span class="n">ballImageURL</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">this</span><span class="o">.</span><span class="na">ballColor</span> <span class="o">=</span> <span class="n">ballColor</span><span class="o">;</span>
  <span class="k">this</span><span class="o">.</span><span class="na">ballImageURL</span> <span class="o">=</span> <span class="n">ballImageURL</span><span class="o">;</span>
 <span class="o">}</span>

 <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getBallColor</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">ballColor</span><span class="o">;</span>
 <span class="o">}</span>

 <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getBallImageURL</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">ballImageURL</span><span class="o">;</span>
 <span class="o">}</span>

 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBallColor</span><span class="o">(</span><span class="nc">String</span> <span class="n">ballColor</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">this</span><span class="o">.</span><span class="na">ballColor</span> <span class="o">=</span> <span class="n">ballColor</span><span class="o">;</span>
 <span class="o">}</span>

 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBallImageURL</span><span class="o">(</span><span class="nc">String</span> <span class="n">ballImageURL</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">this</span><span class="o">.</span><span class="na">ballImageURL</span> <span class="o">=</span> <span class="n">ballImageURL</span><span class="o">;</span>
 <span class="o">}</span>
 
<span class="o">}</span>
</pre></table></code></div></div><h3 id="using-flyweight-object-in-the-actual-class">USING FLYWEIGHT OBJECT IN THE ACTUAL CLASS</h3><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
</pre><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">com.designpattern</span><span class="o">;</span>

<span class="c1">//Ball class representing individual balls with unique extrinsic attributes</span>
<span class="c1">//This will have getters and setters for values which are dynamic</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Ball</span> <span class="o">{</span>

 <span class="c1">//reference to the intrinsic values</span>
 <span class="kd">private</span> <span class="nc">FlyweightBall</span> <span class="n">flyweightBall</span><span class="o">;</span>
 
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">coordinateX</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">coordinateY</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">radius</span><span class="o">;</span>
    
    <span class="c1">//constructor to set the intrinsic value</span>
    <span class="c1">//every ball must have some value for X and Y coordinates, so we can set them using constructor itself here</span>
    <span class="kd">public</span> <span class="nf">Ball</span><span class="o">(</span><span class="nc">FlyweightBall</span> <span class="n">flyweightBall</span><span class="o">,</span> <span class="kt">int</span> <span class="n">coordinateX</span><span class="o">,</span> <span class="kt">int</span> <span class="n">coordinateY</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">flyweightBall</span> <span class="o">=</span> <span class="n">flyweightBall</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">coordinateX</span> <span class="o">=</span> <span class="n">coordinateX</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">coordinateY</span> <span class="o">=</span> <span class="n">coordinateY</span><span class="o">;</span>
    <span class="o">}</span>

 <span class="kd">public</span> <span class="nc">FlyweightBall</span> <span class="nf">getFlyweightBall</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">flyweightBall</span><span class="o">;</span>
 <span class="o">}</span>

 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setFlyweightBall</span><span class="o">(</span><span class="nc">FlyweightBall</span> <span class="n">flyweightBall</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">this</span><span class="o">.</span><span class="na">flyweightBall</span> <span class="o">=</span> <span class="n">flyweightBall</span><span class="o">;</span>
 <span class="o">}</span>

 <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getCoordinateX</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">coordinateX</span><span class="o">;</span>
 <span class="o">}</span>

 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCoordinateX</span><span class="o">(</span><span class="kt">int</span> <span class="n">coordinateX</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">this</span><span class="o">.</span><span class="na">coordinateX</span> <span class="o">=</span> <span class="n">coordinateX</span><span class="o">;</span>
 <span class="o">}</span>

 <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getCoordinateY</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">coordinateY</span><span class="o">;</span>
 <span class="o">}</span>

 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCoordinateY</span><span class="o">(</span><span class="kt">int</span> <span class="n">coordinateY</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">this</span><span class="o">.</span><span class="na">coordinateY</span> <span class="o">=</span> <span class="n">coordinateY</span><span class="o">;</span>
 <span class="o">}</span>

 <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getRadius</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">return</span> <span class="n">radius</span><span class="o">;</span>
 <span class="o">}</span>

 <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setRadius</span><span class="o">(</span><span class="kt">int</span> <span class="n">radius</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">this</span><span class="o">.</span><span class="na">radius</span> <span class="o">=</span> <span class="n">radius</span><span class="o">;</span>
 <span class="o">}</span>

 <span class="nd">@Override</span>
 <span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">return</span> <span class="s">"Ball [flyweightBall="</span> <span class="o">+</span> <span class="n">flyweightBall</span> <span class="o">+</span> <span class="s">", coordinateX="</span> <span class="o">+</span> <span class="n">coordinateX</span> <span class="o">+</span> <span class="s">", coordinateY="</span> <span class="o">+</span> <span class="n">coordinateY</span>
    <span class="o">+</span> <span class="s">", radius="</span> <span class="o">+</span> <span class="n">radius</span> <span class="o">+</span> <span class="s">"]"</span><span class="o">;</span>
 <span class="o">}</span>
 
<span class="o">}</span>
</pre></table></code></div></div><h3 id="using-factory-class-to-manage-flyweight-objects">USING FACTORY CLASS TO MANAGE FLYWEIGHT OBJECTS</h3><p>The BallFactory class acts as a cache for managing FlyweightBall objects. It ensures that only one instance of a FlyweightBall with a specific combination of ballColor and ballImageURL is created. This prevents the unnecessary creation of multiple FlyweightBall objects with the same intrinsic attributes and helps save memory.</p><p>By reusing the same FlyweightBall object for different balls, the Flyweight pattern helps minimize memory consumption, especially when dealing with a large number of balls that share common intrinsic attributes.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">com.designpattern</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>

<span class="c1">//BallFactory class for creating and managing FlyweightBall objects</span>
<span class="c1">//This is like a cache. The "FlyweightBall" for a given "ballColor" and "ballImageURL" will not change</span>
<span class="c1">//So, it checks it an object with a given "ballColor" and "ballImageURL" already exists. If so, return it. </span>
<span class="c1">//This is where we are saving memory because for thousands of balls, we are referring to the same Flyweight object</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BallFactory</span> <span class="o">{</span>

 <span class="kd">private</span> <span class="kd">static</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">FlyweightBall</span><span class="o">&gt;</span> <span class="n">ballPool</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;&gt;();</span>

 <span class="kd">public</span> <span class="kd">static</span> <span class="nc">FlyweightBall</span> <span class="nf">getFlyweightBall</span><span class="o">(</span><span class="nc">String</span> <span class="n">color</span><span class="o">,</span> <span class="nc">String</span> <span class="n">imageURL</span><span class="o">)</span> <span class="o">{</span>
  
  <span class="nc">String</span> <span class="n">key</span> <span class="o">=</span> <span class="n">color</span> <span class="o">+</span> <span class="s">"_"</span> <span class="o">+</span> <span class="n">imageURL</span><span class="o">;</span>

  <span class="c1">// Check if a flyweight ball with the same intrinsic attributes already exists</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">ballPool</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="n">key</span><span class="o">))</span> <span class="o">{</span>
   <span class="k">return</span> <span class="n">ballPool</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
   <span class="c1">// If not, create a new flyweight ball and add it to the pool</span>
   <span class="nc">FlyweightBall</span> <span class="n">flyweightBall</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FlyweightBall</span><span class="o">(</span><span class="n">color</span><span class="o">,</span> <span class="n">imageURL</span><span class="o">);</span>
   <span class="n">ballPool</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">flyweightBall</span><span class="o">);</span>
   <span class="k">return</span> <span class="n">flyweightBall</span><span class="o">;</span>
  <span class="o">}</span>
 <span class="o">}</span>

<span class="o">}</span>
</pre></table></code></div></div><h3 id="client">CLIENT</h3><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
</pre><td class="rouge-code"><pre><span class="kn">package</span> <span class="nn">com.demo</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.designpattern.Ball</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.designpattern.BallFactory</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> <span class="o">{</span>

 <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
   
  <span class="c1">//this will create a new flyweight ball object for key = color + "_" + imageURL;</span>
  <span class="nc">Ball</span> <span class="n">redBall1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Ball</span><span class="o">(</span><span class="nc">BallFactory</span><span class="o">.</span><span class="na">getFlyweightBall</span><span class="o">(</span><span class="s">"red"</span><span class="o">,</span> <span class="s">"redball.png"</span><span class="o">),</span> <span class="mi">100</span><span class="o">,</span> <span class="mi">200</span><span class="o">);</span>
  <span class="c1">//since key = color + "_" + imageURL will be the same, it will re-use the existing flyweight object</span>
  <span class="nc">Ball</span> <span class="n">redBall2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Ball</span><span class="o">(</span><span class="nc">BallFactory</span><span class="o">.</span><span class="na">getFlyweightBall</span><span class="o">(</span><span class="s">"red"</span><span class="o">,</span> <span class="s">"redball.png"</span><span class="o">),</span> <span class="mi">200</span><span class="o">,</span> <span class="mi">300</span><span class="o">);</span>

  <span class="c1">//we can set other extrinsic properties like the radius by calling the setter method.</span>
  
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"BALL 1:"</span><span class="o">);</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">redBall1</span><span class="o">);</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">redBall1</span><span class="o">.</span><span class="na">getFlyweightBall</span><span class="o">().</span><span class="na">getBallColor</span><span class="o">());</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">redBall1</span><span class="o">.</span><span class="na">getFlyweightBall</span><span class="o">().</span><span class="na">getBallImageURL</span><span class="o">());</span>
  
  
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
  
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"BALL 2:"</span><span class="o">);</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">redBall2</span><span class="o">);</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">redBall2</span><span class="o">.</span><span class="na">getFlyweightBall</span><span class="o">());</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">redBall2</span><span class="o">.</span><span class="na">getFlyweightBall</span><span class="o">().</span><span class="na">getBallColor</span><span class="o">());</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">redBall2</span><span class="o">.</span><span class="na">getFlyweightBall</span><span class="o">().</span><span class="na">getBallImageURL</span><span class="o">());</span>
  
 <span class="o">}</span>
 
<span class="o">}</span>
</pre></table></code></div></div><h3 id="output">OUTPUT</h3><p>Notice here that the flyweighBall has the same reference!</p><div class="language-text highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>BALL 1:
Ball [flyweightBall=com.designpattern.FlyweightBall@4c203ea1, coordinateX=100, coordinateY=200, radius=0]
red
redball.png

BALL 2:
Ball [flyweightBall=com.designpattern.FlyweightBall@4c203ea1, coordinateX=200, coordinateY=300, radius=0]
com.designpattern.FlyweightBall@4c203ea1
red
redball.png
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/design-patterns/'>design_patterns</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/java/" class="post-tag no-text-decoration" >java</a> <a href="/tags/design-patterns/" class="post-tag no-text-decoration" >design_patterns</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Design Pattern: Flyweight - Gaurav's GitHub Page&url=https://gkgaurav31.github.io/posts/design-pattern-flyweight/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Design Pattern: Flyweight - Gaurav's GitHub Page&u=https://gkgaurav31.github.io/posts/design-pattern-flyweight/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Design Pattern: Flyweight - Gaurav's GitHub Page&url=https://gkgaurav31.github.io/posts/design-pattern-flyweight/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://gkgaurav31.github.io/posts/design-pattern-flyweight/" data-toggle="tooltip" data-placement="top" title="Linkedin" target="_blank" rel="noopener" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/amount-of-time-for-binary-tree-to-be-infected/">Amount of Time for Binary Tree to Be Infected</a><li><a href="/posts/cross-site-scripting-xss/">Cross-Site Scripting (XSS)</a><li><a href="/posts/find-the-celebrity/">Find the Celebrity</a><li><a href="/posts/find-the-element-that-appears-once-in-sorted-array/">Find the element that appears once in sorted array (geeksforgeeks - SDE Sheet)</a><li><a href="/posts/find-all-pairs-with-a-given-sum-geeksforgeeks-sde-sheet/">Find all pairs with a given sum (geeksforgeeks - SDE Sheet)</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/geeksforgeeks/">geeksforgeeks</a> <a class="post-tag" href="/tags/important/">important</a> <a class="post-tag" href="/tags/leetcode/">leetcode</a> <a class="post-tag" href="/tags/sde-sheet/">sde-sheet</a> <a class="post-tag" href="/tags/arrays/">arrays</a> <a class="post-tag" href="/tags/neetcode150/">neetcode150</a> <a class="post-tag" href="/tags/binarytree/">binarytree</a> <a class="post-tag" href="/tags/dynamic-programming/">dynamic_programming</a> <a class="post-tag" href="/tags/interviewbit/">interviewbit</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/design-pattern-singleton/"><div class="card-body"> <span class="timeago small" > Jul 5, 2023 <i class="unloaded">2023-07-05T23:17:00+05:30</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Design Pattern: Singleton</h3><div class="text-muted small"><p> SINGLETON The objective is to ensure that a single object of a particular class can exist for an app. Thought Process: We will have to make the constructor of that class private so that other...</p></div></div></a></div><div class="card"> <a href="/posts/design-pattern-builder/"><div class="card-body"> <span class="timeago small" > Jul 6, 2023 <i class="unloaded">2023-07-06T22:18:00+05:30</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Design Pattern: Builder</h3><div class="text-muted small"><p> BUILDER Thought Process: We need to create an object of a class which has numerous attributes and they need some kind of validation before we create the object Although we can directly use a...</p></div></div></a></div><div class="card"> <a href="/posts/design-pattern-prototype/"><div class="card-body"> <span class="timeago small" > Jul 10, 2023 <i class="unloaded">2023-07-10T21:24:00+05:30</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Design Pattern: Prototype</h3><div class="text-muted small"><p> PROTOTYPE IDEA Imagine a situation where creating an object is a costly task. This can happen when we need certain information from a database or external service before we can create the object....</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/design-pattern-facade/" class="btn btn-outline-primary" prompt="Older"><p>Design Pattern: Facade</p></a> <a href="/posts/merge-sorted-array/" class="btn btn-outline-primary" prompt="Newer"><p>Merge Sorted Array</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/gkgaurav31">Gaurav Kumar</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/geeksforgeeks/">geeksforgeeks</a> <a class="post-tag" href="/tags/important/">important</a> <a class="post-tag" href="/tags/leetcode/">leetcode</a> <a class="post-tag" href="/tags/sde-sheet/">sde sheet</a> <a class="post-tag" href="/tags/arrays/">arrays</a> <a class="post-tag" href="/tags/neetcode150/">neetcode150</a> <a class="post-tag" href="/tags/binarytree/">binarytree</a> <a class="post-tag" href="/tags/dynamic-programming/">dynamic_programming</a> <a class="post-tag" href="/tags/interviewbit/">interviewbit</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://gkgaurav31.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
